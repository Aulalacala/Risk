@using Risk.Models
@model Risk.Models.DatosTablaModel

<!-- SCRIPTS -->

<script type="text/javascript" src="~/Content/js/jquery/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="~/Content/js/jquery/jquery.browser.min.js"></script>
<script type="text/javascript" src="~/Content/js/jquery/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="~/Content/datetables/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="~/Content/datetables/dataTables.responsive.min.js"></script>
<script type="text/javascript" src="~/Content/datetables/dataTables.scroller.min.js"></script>

<link rel="stylesheet" href="~/Content/datetables/responsive.dataTables.min.css" type="text/css" />
<link rel="stylesheet" href="~/Content/datetables/scroller.dataTables.min.css" type="text/css" />

@{if (Model.datosTBody == null)
    {

  <!-- TITLE & BUTTONS -->
        <span class="title bigger">@Model.titulo</span>
        <div class="clearfix"></div>

        <table rules="rows" id="tablaDatosRiesgos" class="table">
            <thead>
                <tr>

                    <th text-align="right">
                        Editar
                    </th>
                    @{foreach (var item in Model.datosTHead)
                        {
                            <th class="td-large">@item.Value.ToString()</th>
                        }
                    }
                </tr>

            </thead>
        </table>
                        }

                        else
                        {

        <!-- TITLE & BUTTONS -->
                            <span class="title bigger">@Model.titulo</span>
                            <div class="clearfix"></div>

                            <table rules="rows" id="tablaDatosRiesgos" class="table">
                                <thead>
                                    <tr>

                                        @{
                                            switch (Model.vistaProcedencia)
                                            {
                                                case "Historical":
                                                    break;

                                                default:
                                                    <th text-align="right">
                                                        Editar
                                                    </th>
                                                    break;
                                            }
                                        }
                                        @{
                                            foreach (var item in Model.datosTHead)
                                            {
                                                <th class="td-large">@item.Value.ToString()</th>
                                            }

                                        }
                                    </tr>

                                </thead>
                                <tbody>
                                    @{
                                        switch (Model.vistaProcedencia)
                                        {
                                            case "Historical":

                                                foreach (var fila in Model.datosTBody)
                                                {
                                                    <tr>
                                                        @{foreach (var columna in fila.Value)
                                                            {
                                                                switch (columna.ToString())
                                                                {
                                                                    case "True":
                                                                        <td>
                                                                            <input class="checkbox" type="checkbox" checked />
                                                                        </td>
                                                                        break;

                                                                    case "False":
                                                                        <td>
                                                                            <input class="checkbox" type="checkbox" />
                                                                        </td>
                                                                        break;

                                                                    default:
                                                                        <td class="td-large">@columna.ToString()</td>
                                                                        break;
                                                                }

                                                            }
                                                        }
                                                    </tr>
                                                                }


                                                                break;

                                                            default:
                                                                foreach (var fila in Model.datosTBody)
                                                                {
                                                                    <tr>
                                                                        <td text-align="right">
                                                                            <a href="@Url.Action("RiskFicha", "Risk", new { id = fila.Key }) " id="@fila.Key"><i class="glyphicon glyphicon-pencil"></i></a>
                                                                        </td>
                                                                        @{
                                                                            foreach (var columna in fila.Value)
                                                                            {
                                                                                <td class="td-large">@columna.ToString()</td>
                                                                            }
                                                                        }
                                                                    </tr>
                                                                                }
                                                                                break;
                                                                            }
                                    }
                                </tbody>
                            </table>
                                                                            }
}


<script>
    $(document).ready(function () {

        $('#tablaDatosRiesgos tbody').on('click', 'tr', function () {
            if ($(this).hasClass('selected')) {
                $(this).removeClass('selected');
            }
            else {
                table.$('tr.selected').removeClass('selected');
                $(this).addClass('selected');
            }
        });



        if (window.location.href.indexOf("Structure") > -1) {
            var table = $('#tablaDatosRiesgos').DataTable({
                //responsive: true,
                scrollY: 370,
                scrollX: true,
                scrollCollapse: true,
                //scroller: true,
                "bPaginate": false,
                "bFilter": false,
                "bInfo": false,
            })

        } else if (window.location.href.indexOf("AssignMultipleRisks") > -1) {

            var table = $('#tablaDatosRiesgos').DataTable({
                //responsive: true,
                scrollY: 500,
                scrollX: true,
                scrollCollapse: true,
                //scroller: true,
                "bPaginate": false,
                "bFilter": false,
                "bInfo": false,
            })
        } else {
            var table = $('#tablaDatosRiesgos').DataTable({
                //responsive: true,
                scrollY: 1000,
                scrollX: true,
                scrollCollapse: true,
                scroller: true,
            })


        }
    });
</script>
