@using Risk.Models
@{
    ViewBag.Title = "Structure";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!-- SCRIPTS -->
<script type="text/javascript" src="~/Content/js/jquery/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="~/Content/js/jquery/jquery.browser.min.js"></script>
<script type="text/javascript" src="~/Content/js/jquery/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="~/Content/js/bootstrap/bootstrap.min.js"></script>
<script type="text/javascript" src="~/Content/js/bootstrap/bootstrap-metis.menu.min.js"></script>
<script type="text/javascript" src="~/Content/js/bootstrap/bootstrap-datepicker.min.js"></script>
<script type="text/javascript" src="~/Content/js/mdetect/mdetect.js"></script>
<script type="text/javascript" src="~/Content/js/fastclick/fastclick.js"></script>
<script type="text/javascript" src="~/Content/js/scripts.js"></script>
<script type="text/javascript" src="~/Content/js/scripts2.js"></script>
<script type="text/javascript" src="~/Content/datetables/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="~/Content/treeView/bootstrap-treeview.js"></script>


<link rel="stylesheet" href="~/Content/css/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="~/Content/css/responsive.css" type="text/css" media="screen" />
<link rel="stylesheet" href="~/Content/css/bootstrap-theme.css" type="text/css" media="screen" />
<link rel="stylesheet" href="~/Content/datetables/jquery.dataTables.css" type="text/css" />
<link rel="stylesheet" href="~/Content/treeView/bootstrap-treeview.css" type="text/css" />
<link href="~/Content/datetables/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />

<link rel="stylesheet" href="~/Content/treed/treed.css" type="text/css" media="screen" />

<h2>Structure</h2>

@{
    List<tEstructura> datosEstructura = (List<tEstructura>)ViewBag.datosEstructura;
}

<div class="container" style="margin-top:30px;">
    <div class="row">
        <div class="col-md-4">
            <ul id="tree3">

                @{
                    foreach (var dato in datosEstructura)
                    {
                        if (dato.Nivel == 2)
                        {
                            <li>@dato.Nombre</li>
                        }

                        if (dato.Nivel == 3)
                        {
                            <li>@dato.Nombre</li>
                        }
                    }
                }

            </ul>
        </div>





        <ul id="tree3">
            <li>
                <a href="#">TECH</a>
                <ul>
                    <li>Company Maintenance</li>
                    <li>
                        Employees
                        <ul>
                            <li>
                                Reports
                                <ul>
                                    <li>Report1</li>
                                    <li>Report2</li>
                                    <li>Report3</li>
                                </ul>
                            </li>
                            <li>Employee Maint.</li>
                        </ul>
                    </li>
                    <li>Human Resources</li>
                </ul>
            </li>
            <li>
                XRP
                <ul>
                    <li>Company Maintenance</li>
                    <li>
                        Employees
                        <ul>
                            <li>
                                Reports
                                <ul>
                                    <li>Report1</li>
                                    <li>Report2</li>
                                    <li>Report3</li>
                                </ul>
                            </li>
                            <li>Employee Maint.</li>
                        </ul>
                    </li>
                    <li>Human Resources</li>
                </ul>
            </li>
        </ul>
    </div>
</div>



<script>
    //$(document).ready(function(){
    //    $.post("Assign/cargaEstructura", function (data) {
    //        alert(data);
    //    })
    //})

    //    var defaultData = [
    //      {
    //          text: 'Parent 1',
    //          href: '#parent1',
    //          tags: ['4'],
    //          nodes: [
    //            {
    //                text: 'Child 1',
    //                href: '#child1',
    //                tags: ['2'],
    //                nodes: [
    //                  {
    //                      text: 'Grandchild 1',
    //                      href: '#grandchild1',
    //                      tags: ['0']
    //                  },
    //                  {
    //                      text: 'Grandchild 2',
    //                      href: '#grandchild2',
    //                      tags: ['0']
    //                  }
    //                ]
    //            },
    //            {
    //                text: 'Child 2',
    //                href: '#child2',
    //                tags: ['0']
    //            }
    //          ]
    //      },
    //      {
    //          text: 'Parent 2',
    //          href: '#parent2',
    //          tags: ['0']
    //      },
    //      {
    //          text: 'Parent 3',
    //          href: '#parent3',
    //          tags: ['0']
    //      },
    //      {
    //          text: 'Parent 4',
    //          href: '#parent4',
    //          tags: ['0']
    //      },
    //      {
    //          text: 'Parent 5',
    //          href: '#parent5',
    //          tags: ['0']
    //      }
    //    ];

    //    var $checkableTree = $('#treeview-checkable').treeview({
    //        data: defaultData,
    //        showIcon: false,
    //        showCheckbox: true,
    //        onNodeChecked: function (event, node) {
    //            $('#checkable-output').prepend('<p>' + node.text + ' was checked</p>');
    //        },
    //        onNodeUnchecked: function (event, node) {
    //            $('#checkable-output').prepend('<p>' + node.text + ' was unchecked</p>');
    //        }
    //    });


    $.fn.extend({
        treed: function (o) {

            var openedClass = 'glyphicon-minus-sign';
            var closedClass = 'glyphicon-plus-sign';

            if (typeof o != 'undefined') {
                if (typeof o.openedClass != 'undefined') {
                    openedClass = o.openedClass;
                }
                if (typeof o.closedClass != 'undefined') {
                    closedClass = o.closedClass;
                }
            };

            //initialize each of the top levels
            var tree = $(this);
            tree.addClass("tree");
            tree.find('li').has("ul").each(function () {
                var branch = $(this); //li with children ul
                branch.prepend("<i class='indicator glyphicon " + closedClass + "'></i>");
                branch.addClass('branch');
                branch.on('click', function (e) {
                    if (this == e.target) {
                        var icon = $(this).children('i:first');
                        icon.toggleClass(openedClass + " " + closedClass);
                        $(this).children().children().toggle();
                    }
                })
                branch.children().children().toggle();
            });
            //fire event from the dynamically added icon
            tree.find('.branch .indicator').each(function () {
                $(this).on('click', function () {
                    $(this).closest('li').click();
                });
            });
            //fire event to open branch if the li contains an anchor instead of text
            tree.find('.branch>a').each(function () {
                $(this).on('click', function (e) {
                    $(this).closest('li').click();
                    e.preventDefault();
                });
            });
            //fire event to open branch if the li contains a button instead of text
            tree.find('.branch>button').each(function () {
                $(this).on('click', function (e) {
                    $(this).closest('li').click();
                    e.preventDefault();
                });
            });
        }
    });

    //Initialization of treeview
    $('#tree3').treed({ openedClass: 'glyphicon-chevron-right', closedClass: 'glyphicon-chevron-down' });
</script>

